{{/* My Custom Hugo Blox */}}
{{/* https://hugoblox.com */}}

{{/* Initialise the block */}}
{{ $page := .wcPage }}
{{ $block := .wcBlock }}

{{/* Your Hugo variables */}}
{{/* Access custom front matter content via `$block.content`. */}}
{{/* E.g. access a `title` field via `$block.content.title`. */}}
{{/* Pipe the field to `$page.RenderString` to parse it as Markdown. */}}
{{ $title := $block.content.title | $page.RenderString }}
{{ $text := $block.content.text | $page.RenderString }}

{{/* Add your block layout below */}}
{{/* Styles (in the form of vanilla CSS) can be added to the CSS file. */}}
{{/* Tailwind styles can optionally be used with the extra step of compiling Tailwind. */}}
{{/* Access custom front matter design options via `$block.design`. */}}
{{/* E.g. access a `show_title` field via `$block.design.show_title`. */}}

{{ $ := .root }}
{{ $params := .content }}
{{ $folder := index $params.filters.folders 0 }}
{{ $page := site.GetPage (printf "%s" $folder) }}

<div class="collage">
  {{ with $params.title }}
  <div class="col-md-12 section-heading">
    <h1>{{ . | markdownify | emojify }}</h1>
  </div>
  {{ end }}

  {{ with $page.Content }}
  <div class="col-md-12">
    {{ . }}
  </div>
  {{ end }}

  {{ if $page }}
  <div class="collage grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
    {{ range $page.Resources.Match "*.{jpg,jpeg,png,webp}" }}
      {{ $img := .Resize "600x" }}
      <img src="{{ $img.RelPermalink }}" class="rounded shadow" alt="{{ .Name }}">
    {{ end }}
  </div>
  {{ end }}
</div>
