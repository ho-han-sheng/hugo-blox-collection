{{ $block := .wcBlock }}
{{ $page := .wcPage }}

{{ $title := $block.content.title | $page.RenderString }}
{{ $folder := index $block.content.filters.folders 0 }}
{{ $folderPage := site.GetPage $folder }}

<section id="{{ $block.id }}" class="py-12">
  <div class="container mx-auto px-4">
    {{ with $title }}
      <h2 class="text-3xl font-bold mb-6">{{ . }}</h2>
    {{ end }}

    {{ if $folderPage }}
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
        {{ range $folderPage.Resources.Match "*.{jpg,jpeg,png,webp}" }}
          {{ $img := .Resize "600x" }}
          <img src="{{ $img.RelPermalink }}" alt="{{ .Name }}" class="rounded shadow">
        {{ end }}
      </div>
    {{ else }}
      <p class="text-gray-500">No folder found for collage: {{ $folder }}</p>
    {{ end }}
  </div>
</section>
